%!TEX root = forallxbris.tex
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{forallxbris}[2019/09/20 support for a logic textbook]

% Package options: allow loading specialized style variants
% Usage: \RequirePackage[textbook]{forallxbris}

% Use boolean flags for each integrated style variant
\newif\ifforallx@textbook
\newif\ifforallx@problemsheets
\newif\ifforallx@exam
\newif\ifforallx@beamer
\newif\ifforallx@handout

\DeclareOption{textbook}{\forallx@textbooktrue}
\DeclareOption{problemsheets}{\forallx@problemsheetstrue}
\DeclareOption{exam}{\forallx@examtrue}
\DeclareOption{beamer}{\forallx@beametrue}
\DeclareOption{handout}{\forallx@handouttrue}
\DeclareOption*{\PackageWarning{forallxbris}{Unknown option `\CurrentOption' ignored}}
\ProcessOptions\relax

% -----------------------------
% Textbook style (inlined)
% -----------------------------
\ifforallx@textbook
	% forallxbris-style-textbook (inlined)
	
	% forallxbris-style provides layout and style setup for forall x: bris books
	
	\NeedsTeXFormat{LaTeX2e}

	
	\RequirePackage{hyperref,ifthen,graphicx,xcolor,amssymb}
	\RequirePackage[numbered]{bookmark} %TB: added for speedy navigation
	\RequirePackage[nonumberlist,toc,style=index]{glossaries}
	\makeglossaries
	\RequirePackage{tabu}
	\RequirePackage[defaultlines=2,all]{nowidow}
	
	%RZ: typefaces
	
	\RequirePackage{helvet}
	\RequirePackage[osf]{Baskervaldx} % oldstyle figures
	\RequirePackage[bigdelims,baskervaldx]{newtxmath}
	
	%RZ: Make sure we have a copyright symbol
	
	\def\copyright{\textcircled{C}}
	
	%RZ: Include git revision info
	
	\RequirePackage{gitinfo2}
	
	% RZ: TOC widths
	
	\setlength{\cftpartnumwidth}{3em}
	\setlength{\cftchapternumwidth}{2.2em}
	\setlength{\cftsectionnumwidth}{3.3em}
	\setlength{\cftbeforechapterskip}{0pt} %TB: to leave no gap between sections (which LaTeX regards as chapters) in the TOC
	\renewcommand{\cftchapterfont}{\textrm}
	\renewcommand{\cftchapterpagefont}{\textrm}
	
	% Chapter style
	
	\newlength{\barlength}
	\setlength{\barlength}{400pt}
	\makechapterstyle{leadbeater}{%
		\setlength{\afterchapskip}{40pt}
		\setlength{\beforechapskip}{50pt}
		\setlength{\midchapskip}{10pt}
		\renewcommand*{\afterchapternum}{\par\nobreak\vskip 0pt}
		\renewcommand*{\chapnamefont}{\fontsize{14pt}{0pt}\selectfont\sffamily\bfseries}
		\renewcommand*{\chapnumfont}{\fontsize{14pt}{0pt}\selectfont\sffamily\bfseries}
		\renewcommand*{\chaptitlefont}{\normalfont\fontsize{48pt}{48pt}\selectfont\bfseries\itshape\color{leadbeater}}
		\renewcommand*{\printchaptername}{%
			\chapnamefont\MakeUppercase{\@chapapp}}
		\renewcommand*{\printchaptertitle}[1]{%
			\chaptitlefont ##1\\[-\baselineskip]%
			\hspace*{-20pt}%
			\smash{\color{leadbeater}\rule{7pt}{\barlength}}}
	}
	
	\renewcommand*{\partnamefont}{\fontsize{24pt}{0pt}\selectfont\sffamily\bfseries}
	\renewcommand*{\partnumfont}{\fontsize{24pt}{0pt}\selectfont\sffamily\bfseries}
	\renewcommand*{\parttitlefont}{\normalfont\fontsize{48pt}{48pt}\selectfont\bfseries\itshape\color{leadbeater}}
	\renewcommand*{\printpartname}{%
		\partnamefont PART}
	
	\chapterstyle{leadbeater}
	
	\copypagestyle{leadbeater}{headings}
	
	\makeoddhead{leadbeater}{\small\sffamily\color{leadbeater}\rightmark}{}
	{\color{leadbeater}\sffamily\bfseries\thepage}
	
	\makeevenhead{leadbeater}{\small\sffamily\color{leadbeater}\leftmark}{}
	{\color{leadbeater}\sffamily\bfseries\thepage}
	
	\RequirePackage[font={small,it}]{caption}
	
	%    ****************************************
	%    *        TITLE AND VERSION DATA        *
	%    ****************************************
	% the title of the book
	\newcommand*{\forallx}{\texttt{forall}\script{x}}
	\newcommand*{\forallxbris}{\texttt{forall}\script{x}\texttt{:Calgary}}
	% The version number of the book is a 5 digit integer:
	% the last digit of the year, the month, the day of the month
	\newcounter{dummy}
	\setcounter{dummy}{\year}
	\addtocounter{dummy}{-2000}
	\newcommand*{\bookversion}{%
		\ifthenelse{\arabic{dummy}<10}{0}{}%
		\arabic{dummy}%
		\ifthenelse{\month<10}{0}{}\number\month%
		\ifthenelse{\day<10}{0}{}\number\day%
	}
	
	
	\RequirePackage{enumitem}
	
	% Define an enumerate-like list
	\newlist{samplesent}{enumerate}{1}
	
	% Make it compact and give it a "series" so it can resume across blocks
	\setlist[samplesent]{noitemsep,label=\arabic*.,ref=\arabic*,resume}
	
	% Reset the underlying counter each chapter
	\@addtoreset{samplesenti}{chapter}
	
	
	
	
	% Used in specifying partial models, this keeps the lines justified so
	% so that the = signs all line up. For example:
	%	\begin{partialmodel}
		%		UD			& \{Duke, Miles\}\\
		%		\extension{B}	& \{Duke\}
		%	\end{partialmodel}
	\newenvironment{partialmodel}{\par\begin{tabular}{r@{~=~}l}}{\end{tabular}\par}
	% define the bullet for {itemize} lists
	\renewcommand{\labelitemi}{$\triangleright$}
	
	% \factoidbox{...} produces an inset paragraph of text with a line around it
	% Neither for lists nor an environment, but it really didn't
	% belong anywhere else.
	\RequirePackage{tcolorbox}
	\newcommand{\factoidbox}[1]{\begin{factoidboxe}#1\end{factoidboxe}}
	\newenvironment{factoidboxe}{%
		\begin{tcolorbox}[%width=.9\textwidth,
			%      leftright skip=.05\textwidth,
			sharp corners=downhill,
			beforeafter skip=.7em,
			colframe={leadbeater},colback={vltleadbeater}]}{
	\end{tcolorbox}}
	\newenvironment{highlighted}{\factoidboxe}{\endfactoidboxe}
	
	% \tablefbox{...} is used in certain tables to put a box around the contents of specific table cells without having lines that run the whole length of the table
	\newcommand{\tablefbox}[1]{\multicolumn{1}{|p{10em}|}{#1}}
	
	
	%    ****************************************
	%    *          PRACTICE PROBLEMS           *
	%    ****************************************
	\newcounter{ProbPart}
	\renewcommand{\theProbPart}{\Alph{ProbPart}}
	\renewcommand{\theHProbPart}{\thechapter.\theProbPart}
	% This inserts a heading and resets the counter:
	
	%\newenvironment{practiceproblems}{
		%	\setcounter{ProbPart}{0}\section*{Practice exercises}%
		%  \sectionmark{Practice exercises}%
		%	\addcontentsline{toc}{section}{Practice exercises}
		%}{}
	
	
	%\RequirePackage{comment}
	%\newcommand{\nopracticeproblems}{\excludecomment{practiceproblems}}
	
	
	%\RequirePackage[active,generate=practiceproblems,extract-env={practiceproblems}]{extract}
	
	\newcommand\myanswer[1]{\textcolor{leadbeater}{#1}} % TB: puts model answers in blue
	\RequirePackage{marginnote}
	
	\newcommand{\noanswers}{%
		\renewcommand{\myanswer}[1]{%
			\marginnote{(\ensuremath{\ast})}%
		}%
	}
	
	\newcommand{\showanswers}{%
		\renewcommand{\myanswer}[1]{\textcolor{blue}{##1}}%
	}
	
	
	
	\RequirePackage{xparse}
	\ExplSyntaxOn
	
	\tl_new:N \g_practice_store_tl
	
	% #1 = chapter number (already frozen as digits)
	% #2 = body
	\cs_new_protected:Npn \__pr_replay:nn #1#2
	{
		\section*{Chapter~#1}
		\begingroup
		\setcounter{ProbPart}{0}%
		
		% avoid hyperref anchors on replay
		\cs_set_eq:NN \refstepcounter \stepcounter
		\cs_if_exist:NT \phantomsection
		{ \cs_set_eq:NN \phantomsection \prg_do_nothing: }
		
		\showanswers
		#2
		\endgroup
	}
	
	\NewDocumentEnvironment{practiceproblems}{+b}
	{
		% typeset in place (use frozen arabic chapter number)
		\par\bigskip
		\noindent\textbf{Practice~exercises~(Chapter~\int_to_arabic:n{\value{chapter}})}\par\medskip
		\setcounter{ProbPart}{0}%
		#1
		
		% store for later replay:
		% - expand chapter number NOW to digits
		% - keep body unexpanded
		\tl_gput_right:Nx \g_practice_store_tl
		{
			\exp_not:N \__pr_replay:nn
			{ \int_to_arabic:n { \value{chapter} } }
			{ \exp_not:n {#1} }
		}
	}
	{ }
	
	\NewDocumentCommand{\PrintCollectedPracticeWithAnswers}{}
	{ \tl_use:N \g_practice_store_tl }
	
	\ExplSyntaxOff
	
	
	
	
	
	
	% This starts a new section which is automatically numbered:
	\newcommand*{\problempart}{\par\noindent\refstepcounter{ProbPart}\textbf{\Roman{ProbPart}. }}
	% This bullet is used to indicate that solutions appear at the end of
	% the book.
	\newcommand*{\solutions}{} %TB: removed, since I am not including the solutions in the book
	% When solutions are only given for selected problems, the
	% star is placed left of the problem number.
	\newcommand*{\leftsolutions}{\hspace{-2.2em}\makebox[2em][l]{\solutions}}
	
	% This is used at the beginning of a section in the solutions
	% appendix.
	\newcommand*{\solutionsection}[2]{%
		\textbf{\textsc{Chapter {\ref{#1}} Part {\ref{#2}}}}%
		\markright{solutions for ch.~\ref{#1}}%
		\setcounter{countSeq}{0}
	}
	
	
	
	
	
	
	
	
	% This is used to enumerate things that have a given property.
	% For example: \nextSeq\nextSeq\noSeq\lastSeq are valid.
	% produces   : 1, 2, and 4 are valid.
	\newcounter{countSeq}
	\newcommand*{\nextSeq}{\stepcounter{countSeq}\arabic{countSeq}, }
	\newcommand*{\noSeq}{\stepcounter{countSeq}}
	\newcommand*{\lastSeq}{and \stepcounter{countSeq}\arabic{countSeq} }
	
	% This is used to place (eg) a partial model or proof as an item
	% in a list. Without it, the item tag will be vertically centered next
	% to the model or proof.
	%		--- doesn't actually work yet ---
	\newenvironment{solutioninlist}{}{}%{~\vspace{-1.6em}}{}
	
	
	
	
	
	%\setlist[enumerate,1]{label=\alph*., ref=\alph*}
	%\setlist[enumerate,2]{label={\roman*}),
		%ref=\theenumi.{\roman*}}
	
	
	
	%    ****************************************
	%    *         TABLE OF CONTENTS, ETC.      *
	%    ****************************************
	\renewcommand{\thechapter}{\arabic{chapter}}
	\renewcommand{\thepart}{\Roman{part}}
	\renewcommand{\thesection}{\arabic{chapter}.\arabic{section}}
	
	\setcounter{tocdepth}{0} %TB: only chapters and sections to appear
	
	\setlength{\columnsep}{2em} % Sets 2em space between columns when calling multicol
	
	\definecolor{darkred}{rgb}{0.5,0,0} % TB: used to color links in red
	
	
	
	
	\hypersetup{pdfinfo={Title={forall x: Bristol}, Author={P.D. Magnus, Tim Button, J. Rob Loftis, Rob Trueman, Aaron Thomas-Bolduc, Richard Zach, Catrin Campbell-Moore}, Subject={An open access introductory textbook in formal logic}, Keywords={truth-functional logic, propositional logic, predicate logic, first-order logic, natural deduction}}, %
		bookmarks={true}, %
		bookmarksopen = true,
		colorlinks={true}, %
		allcolors={dkleadbeater},
		pdfdisplaydoctitle={true}}
	\urlstyle{same}
	
	
	
	
	\newcommand{\teachingnote}[1]{\textcolor{gray}{#1}}
	\newcommand{\nonexaminable}[1]{\textcolor{gray}{ (Non-examinable)}}
	
	
	



\fi % end textbook


\RequirePackage{amssymb}
\RequirePackage{amsmath}
%\RequirePackage[bookmarks=true]{hyperref}
\RequirePackage{multicol}
\RequirePackage{ifthen}
\RequirePackage{graphicx}
\RequirePackage{pifont}
\RequirePackage{rotating}
\RequirePackage{xcolor}
\RequirePackage{tabu}
\RequirePackage{todonotes}% CCM
\RequirePackage{mathtools}
\RequirePackage{xspace} % CCM for metavars
%\RequirePackage[l2tabu, orthodox]{nag}
\RequirePackage[cal=boondoxo]{mathalfa}
\RequirePackage[german,english]{babel}
% The original fitchproofs was written in 2005
% Comments marked "TB" are additions by Tim Button in September 2012

%    ****************************************
%    *            LOGICAL SYMBOLS           *
%    ****************************************
%
% There are, of course, many different symbols used for the truth-functional
% connectives. In order to make the book adaptable, the symbols are defined
% here in the style sheet and these commands are used throughout the book.
% To change conjunction from the ampersand to the carat, for instance,
% change the definition of \eand from ~\&~ to \wedge. To change negation from
% the hoe to the swung dash, change \enot from \neg to {\sim}. Other examples
% are given below.
%
\let\oldtherefore\therefore
\def\therefore{\ensuremath{\oldtherefore}}
%\def\therefore{\text{Therefore}}

% disjunction
\def\eor{\ensuremath{\vee}}
% conjunction:
% {\,^{_{_{_{_{\mbox{\footnotesize\textbullet}}}}}}} gives the dot
% \def\eand{\ensuremath{\wedge}}
\def\eand{\ensuremath{\mathbin{\wedge}}}
% conditional: \supset gives the horseshoe
\def\eif{\ensuremath{\rightarrow}}
% biconditional: \equiv gives the triple bar
\def\eiff{\ensuremath{\leftrightarrow}}
% negation: {\sim} gives the swung dash
\def\enot{\ensuremath{\neg}}
\def\ered{\ensuremath{\bot}}% TB: added to give an absurdity sign
\def\eid{\ensuremath{\!=\!}}% CCM: to have no spacing around identity.
\newcommand*{\ebox}{\ensuremath{\Box}}
\def\ediamond{\ensuremath{\Diamond}}
\def\maththe{\rotatebox[origin=c]{180}{$\iota$}} % TB: added to give definite description operator
\def\proves{\ensuremath{\vdash}}
\def\entails{\ensuremath{\vDash}}
\def\nproves{\ensuremath{\nvdash}}
\def\nentails{\ensuremath{\nvDash}}

% modal logic systems
\def\mlK{\ensuremath{\mathbf{K}}}
\def\mlT{\ensuremath{\mathbf{T}}}
\def\mlSfour{\ensuremath{\mathbf{S4}}}
\def\mlSfive{\ensuremath{\mathbf{S5}}}

% args -- format a list of arguments separated by commas without commas

\newcommand*{\args}[1]{%
  \let\@argsep\@argsepinit
  \@for\@arg:=#1\do{%
    \@argsep\@arg}%
}

\def\@argsepinit{\let\@argsep\argsep}

\newcommand{\argsep}{}

\newcommand{\atom}[2]{\mathord{#1}#2}

%    ****************************************
%    *       SYMBOLS AND SCRIPTY BITS       *
%    ****************************************
% equivalent to commenting something out, but usable on multiple lines
\providecommand{\nix}[1]{}

\newcommand*{\script}[1]{\ensuremath{\mathcal{#1}}}

\providecommand{\meta}[1]{\ensuremath{#1}} % TB: used for all metavariables
\renewcommand*{\meta}[1]{\ensuremath{#1}} % TB: used for all metavariables
\newcommand{\metaX}{\ensuremath{X}\xspace}
\newcommand{\metaY}{\ensuremath{Y}\xspace}
\newcommand{\metaZ}{\ensuremath{Z}\xspace}
\newcommand{\metav}{\ensuremath{v}\xspace}
\newcommand{\metaPredicate}{\ensuremath{P}\xspace}
\newcommand{\metaterm}{\ensuremath{t}\xspace}

% create a blank
\newcommand*{\blank}{\underline{\hspace*{2.5em}}}
\newcommand*{\gap}[1]{\blank$_{#1}$} % TB: used for keys, to avoid use/mention confusion

% These are included for discussing formal semantics in predicate logic.
\newcommand*{\model}{{\mathcal{M}}}
%\newcommand*{\extension}[1]{\ensuremath{\mbox{extension}(#1)}}
\newcommand*{\denote}[1]{\llbracket #1\rrbracket}
\newcommand*{\referent}[1]{\ensuremath{\mbox{referent}(#1)}}
  % I personally dislike the default LaTeX angle brackets. I think that
  % they are too narrow. If you want to use them, though, you can
  % replace < and > in the commands below with \langle and \rangle
\newcommand*{\openntuple}{\langle}
\newcommand*{\closentuple}{\rangle}
 \newcommand{\varvariant}[3]{#1[#2 \!\mapsto\! #3]} % variant of a variable assignment



\newcommand\SetSymbol[1][]{\nonscript\:#1\vert\nonscript\:
	\mathopen{}\allowbreak}
\providecommand{\given}{\SetSymbol}
\DeclarePairedDelimiterX\Set[1]\{\}{%
	\renewcommand\given{\SetSymbol[\delimsize]}
	#1
}

\newcommand{\domain}{\mathsf{Dom}}
	
\newcommand*{\ntuple}[1]{\ensuremath{\mathopen{\openntuple}}#1\ensuremath{\mathclose{\closentuple}}}

\newcommand{\NumberConnective}[3][black]{\stackrel{\textcolor{#1}{\hbox{#3}}}{\hbox{$#2$}}} %CCM added for the additional section.

\DeclarePairedDelimiter\sequence{\langle}{\rangle}



% definitions
\newcommand*{\define}[1]{\textsc{\lowercase{\color{leadbeater}#1}}}


\renewcommand{\emptyset}{\varnothing}


%    ****************************************
%    *          QUINE QUOTES          *
%    ****************************************

%%Godel Coding definitions
%	\newbox\QuineQuoteBoxA
%		\newdimen\QuineQuoteCornerHgt
%		\setbox\QuineQuoteBoxA=\hbox{$\ulcorner$}
%		\global\QuineQuoteCornerHgt=\ht\QuineQuoteBoxA
%		\newdimen\QuineQuoteArgHgt
%	\newcommand{\QuineQuoteraised}[1]{
%				\setbox\gnBoxA=\hbox{$#1$}%
%			\QuineQuoteArgHgt=\ht\QuineQuoteBoxA%
%			\ifnum \QuineQuoteArgHgt<\QuineQuoteCornerHgt
%			\QuineQuoteArgHgt=0pt%
%			\else
%			\advance \QuineQuoteArgHgt by -\QuineQuoteCornerHgt%
%			\fi
%			\raise\QuineQuoteArgHgt\hbox{$\ulcorner$} \box\QuineQuoteBoxA %
%			\raise\QuineQuoteArgHgt\hbox{$\urcorner$}}
%
%
%	\newcommand{\QuineQuote}[1]{\ensuremath{\ulcorner} #1 \ensuremath{\urcorner}}}
%
%\RequirePackage{suffix}
%\WithSuffix\newcommand\QuineQuote*{\ensuremath{\gnraised}}

\newcommand{\QuineQuote}[1]{\text{`}#1\text{'}}


%    ****************************************
%    *          FORMATION TREES          *
%    ****************************************

\RequirePackage{forest}

\forestset{
	every tree node/.style={anchor=north}
}



%\RequirePackage{tikzmark}



%    ****************************************
%    *          LIST  ENVIRONMENTS          *
%    ****************************************

\RequirePackage{enumitem}

\newlist{compactlist}{enumerate}{1}
\setlist[compactlist]{noitemsep,label=\arabic*.}

\newlist{earg}{enumerate}{1}
\setlist[earg]{noitemsep,label=-}

%\newlist{earg}{enumerate}{1}
%\setlist[earg]{noitemsep,align=right}

% ebullet - a bulleted list
\newenvironment{ebullet}% TB: added to give a nice bulleted enivronment
{\begin{itemize}[noitemsep,label=\textbullet]}{\end{itemize}}

\newlist{ekeylist}{description}{1}
\setlist[ekeylist]{noitemsep,labelwidth=4em,align=right,font=\normalfont}
\def\ekeylabel#1{\hfil\normalfont\ensuremath{#1}:}
\newenvironment{ekey}{\begin{ekeylist}\renewcommand{\makelabel}{\ekeylabel}}{\end{ekeylist}}

\newenvironment{interp}{\begin{ekeylist}\renewcommand{\makelabel}{\ekeylabel}}{\end{ekeylist}}

\newlist{problemslist}{enumerate}{1}
\setlist[problemslist]{noitemsep,label=\alph*)}

%    ****************************************
%    *             TRUTH TABLES             *
%    ****************************************

% This facilitates the typesetting of truth tables by
% effectively eliminating the intercolumn space.
% This allows truth tables with the Ts and Fs immediately
% below arbitrary connectives.
% An example follows:
%\begin{center}
%\begin{tabular}{c|c|@{\TTon}*{5}{c}@{\TToff}}
%$A$&$B$&$(A$&\eand&$B)$&\eif&A\\
%\hline
% T & T &    &  T  &    &  T & \\
% T & F &    &  F  &    &  T & \\
% F & T &    &  F  &    &  T & \\
% F & F &    &  T  &    &  T &
%\end{tabular}
%\end{center}
%\newcommand*{\TTon}{\hspace{1.5em}\extracolsep{-1em}}
%\newcommand*{\TToff}{\extracolsep{-1em}\hspace{.3em}}

\RequirePackage{multicol,array,multirow}

% Moving to Memoir breaks Magnus's elegant macro
% In the preceding column definition, I would offer instead:
%\begin{tabular}{c c | d e e e f}
% d for left-most columns, e for middle ones, f for right-most ones. The ensuing spacing is ok.
\newcolumntype{d}{ c@{\extracolsep{0.1em}}}
\newcolumntype{e}{@{\extracolsep{0.1em}}c@{\extracolsep{0.1em}}}
\newcolumntype{f}{@{\extracolsep{0.1em}}c }
\newcommand*{\TTbf}[1]{\mainconnective{#1}}

\RequirePackage[table]{xcolor}
\newcommand{\varassigncline}[1]{\arrayrulecolor{gray!40}\cline{#1}\arrayrulecolor{black}}

%    ****************************************
%    *                PROOFS                *
%    ****************************************

\RequirePackage[arrayenv=tabular]{fitch}


% a command for indicating the goal in a proof or subproof
\newcommand*{\want}[1]{\by{want \ensuremath{#1}}{}}


% For backwards compatability for Catrin's rewrites
\newenvironment{pf}{\fitchproof}{\endfitchproof}

\newenvironment{squishedpf}
	{\noindent\par\noindent$\begin{nd}}
	{\end{nd}$\noindent}

% I keep mixing up the \ce and \ae commands, so I define a less ambiguous
% alternate set of commands

\newcommand*{\ce}{\ie}
\newcommand*{\ci}{\ii}

\newcommand*{\notI}{\by{$\enot$I}}
\newcommand*{\notE}{\by{$\enot$E}}
\newcommand*{\pbc}{\by{PbC}}
\newcommand*{\iffI}{\by{{\eiff}I}}
\newcommand*{\iffE}{\by{{\eiff}E}}
\newcommand*{\ifI}{\by{{\eif}I}}
\newcommand*{\ifE}{\by{{\eif}E}}
\newcommand*{\andI}{\by{{\eand}I}}
\newcommand*{\andE}{\by{{\eand}E}}
\newcommand*{\orI}{\by{{\eor}I}}
\newcommand*{\orE}{\by{{\eor}E}}
\newcommand*{\redI}{\by{\bot I}}
\newcommand*{\redE}{\by{\bot E}}
\newcommand*{\botI}{\by{\bot I}}
\newcommand*{\botE}{\by{\bot E}}
\newcommand*{\forallI}{\by{$\forall$I}}
\newcommand*{\forallE}{\by{$\forall$E}}
\newcommand*{\existsI}{\by{$\exists$I}}
\newcommand*{\existsE}{\by{$\exists$E}}
\newcommand*{\LEM}{\by{LEM}{}}
\newcommand*{\Reiteration}{\by{R}}





% added by Tim Button
\def\tnd{\by{TND}}% TB: tertium non datur
\def\dne{\by{DNE}}% TB: double negation elimination (derived rule)
\def\mt{\by{MT}}% TB: modus tollens (derived rule)
\def\ds{\by{DS}}% TB: disjunctive syllogism (a derived rule in Cambridge version)
\def\dem{\by{DeM}}% TB: De Morgan rule (derived rule)
\def\cq{\by{ConvQuant}}% TB: conversion of quantifiers (derived rule)


%Modal logic
  \def\boxI{\by{{\ebox}I}}%
  \def\boxE{\by{{\ebox}E}}%
  \def\mc{\by{MC}}%
  \def\diadf{\by{Def{\ediamond}}}%
  \def\rt{\by{R$\mathbf{T}$}}%
  \def\rfour{\by{R$\mathbf{4}$}}%
  \def\rfive{\by{R$\mathbf{5}$}}%

\newcommand*{\ellipsesline}{\have[\ ]{dots}{\;\raise-.65ex\hbox{\vdots}}}
\newcommand*{\hypoellipsesline}{\hypo[\ ]{dots}{\;\raise-.65ex\hbox{\vdots}}}
% for elipses in statements of rules. E.g.:
%\begin{pf}
%\open
%	\hypo{fitchproof}a}{\metaX}
%	\ellipsesline
%	\have[n]{nb}{\ered}
%\close
%\have[\ ]{na}{\enot\metaX}\ni{a-nb}
%\end{pf}



%    ****************************************
%    *            DIAGRAMS IN TIKZ           *
%    ****************************************
% TB: I use diagrams in a few places, always using Tikz.
%   A. To illustrate an argument for the truth table of the material conditional
%   B. To draw graphs illustrating small finite interpretations.
% All these drawings are done using tikz
\RequirePackage{tikz}
\usetikzlibrary{positioning,shapes,arrows,automata,positioning,shapes,shapes.misc,automata,decorations,decorations.pathreplacing,decorations.pathmorphing,shapes.misc,shadows,tikzmark,arrows.meta}

\tikzset{phantom_shape/.style={thick, fill=black!0, minimum width=30pt, minimum height=30pt}, % TB: renders the shape invisible
grey_shape/.style={thick, fill=black!20, draw, minimum width=30pt, minimum height=30pt}, % TB: renders a light grey shape with a black outline
white_shape/.style={thick, fill=black!0, draw, minimum width=30pt, minimum height=30pt} % TB: renders a white shape with a black outline
}

\RequirePackage{tikzpeople} % CCM for disjunctive reasoning eg

\tikzset{every label/.style={align=center}, every node/.style={align=center}}

	\tikzset{
invisible/.style={opacity=0,text opacity=0},
visible on/.style={alt=#1{}{invisible}},
alt/.code args={<#1>#2#3}{%
 \alt<#1>{\pgfkeysalso{#2}}{\pgfkeysalso{#3}} % \pgfkeysalso doesn't change the path
},
	}
	\forestset{
visible on/.style={
for tree={
 /tikz/visible on={#1},
 edge={/tikz/visible on={#1}}}}}

\tikzset{propn/.style={draw,shape=ellipse,align=center}}
\tikzset{arg/.style={->,shorten >=0.2cm,shorten <=.2cm}}
\tikzset{joiningargin/.style={shorten <=0.2cm}}
\tikzset{joiningargout/.style={->,shorten >=0.2cm}}


%    ****************************************
%    *            RANDOM EXTRA STUFF           *
%    ****************************************

%
%%RZ: Make sure we have a copyright symbol
%
%\def\copyright{\textcircled{C}}

\definecolor{darkred}{rgb}{0.5,0,0} % TB: used to color links in red




% define "struts", as suggested by Claudio Beccari in
%    a piece in TeX and TUG News, Vol. 2, 1993.
\newcommand\Tstrut{\rule{0ex}{2.6ex}}         % = `top' strut
\newcommand\Bstrut{\rule[-0.9ex]{0ex}{0ex}}   % = `bottom' strut



\RequirePackage{pifont}% http://ctan.org/pkg/pifont
\newcommand{\tick}{\ding{51}}%
\newcommand{\cross}{\ding{55}}%



\newcommand{\prem}{\item}
\newcommand{\conc}{\item[$\therefore$] Therefore: }


%\newcommand{\mainconnective}[1]{\,\mainconnectivecolor{#1}\,}
\newcommand{\mainconnectivecolor}[1]{\textcolor{leadbeater}{#1}}

\newcommand{\mainconnective}[1]{%
	\begingroup
	\ifmmode
	\colorbox{yellow!50}{\textcolor{leadbeater}{\ensuremath{#1}}}%
	\else
	\colorbox{yellow!50}{\textcolor{leadbeater}{#1}}%
	\fi
	\endgroup
}

\newcommand{\atomicstage}[1]{%
	\begingroup
	\setlength{\fboxsep}{1.5pt}%
	\mainconnective{#1}%
	\endgroup
}


\def\pr{\ensuremath{p}}


%\newcommand{\ensuretext}[1]{%
%	\ifmmode
%	\text{#1}%
%	\else
%	#1%
%	\fi
%}

\newcommand{\true}{\textrm{T}}
\newcommand{\false}{\textrm{F}}




\endinput

\IfFileExists{forallxbris-local.sty}{\RequirePackage{forallxbris-local}}{}
