%!TEX root = forallxbris.tex
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{forallxbris}[2019/09/20 support for a logic textbook]

\RequirePackage{amssymb}
\RequirePackage{amsmath}
%\RequirePackage[bookmarks=true]{hyperref}
\RequirePackage{multicol}
\RequirePackage{ifthen}
\RequirePackage{graphicx}
\RequirePackage{pifont}
\RequirePackage{rotating}
\RequirePackage{xcolor}
\RequirePackage{tabu}
\RequirePackage{todonotes}% CCM
\RequirePackage{mathtools}
\RequirePackage{xspace} % CCM for metavars
%\RequirePackage[l2tabu, orthodox]{nag}
\usepackage[cal=boondoxo]{mathalfa}
\usepackage[german,english]{babel}
% The original fitchproofs was written in 2005
% Comments marked "TB" are additions by Tim Button in September 2012

%    ****************************************
%    *            LOGICAL SYMBOLS           *
%    ****************************************
%
% There are, of course, many different symbols used for the truth-functional
% connectives. In order to make the book adaptable, the symbols are defined
% here in the style sheet and these commands are used throughout the book.
% To change conjunction from the ampersand to the carat, for instance,
% change the definition of \eand from ~\&~ to \wedge. To change negation from
% the hoe to the swung dash, change \enot from \neg to {\sim}. Other examples
% are given below.
%
\let\oldtherefore\therefore
\def\therefore{\ensuremath{\oldtherefore}}
%\def\therefore{\text{Therefore}}

% disjunction
\def\eor{\ensuremath{\vee}}
% conjunction:
% {\,^{_{_{_{_{\mbox{\footnotesize\textbullet}}}}}}} gives the dot
% \def\eand{\ensuremath{\wedge}}
\def\eand{\ensuremath{\mathbin{\wedge}}}
% conditional: \supset gives the horseshoe
\def\eif{\ensuremath{\rightarrow}}
% biconditional: \equiv gives the triple bar
\def\eiff{\ensuremath{\leftrightarrow}}
% negation: {\sim} gives the swung dash
\def\enot{\ensuremath{\neg}}
\def\ered{\ensuremath{\bot}}% TB: added to give an absurdity sign
\def\eid{\ensuremath{\!=\!}}% CCM: to have no spacing around identity.
\newcommand*{\ebox}{\ensuremath{\Box}}
\def\ediamond{\ensuremath{\Diamond}}
\def\maththe{\rotatebox[origin=c]{180}{$\iota$}} % TB: added to give definite description operator
\def\proves{\ensuremath{\vdash}}
\def\entails{\ensuremath{\vDash}}
\def\nproves{\ensuremath{\nvdash}}
\def\nentails{\ensuremath{\nvDash}}

% modal logic systems
\def\mlK{\ensuremath{\mathbf{K}}}
\def\mlT{\ensuremath{\mathbf{T}}}
\def\mlSfour{\ensuremath{\mathbf{S4}}}
\def\mlSfive{\ensuremath{\mathbf{S5}}}

% args -- format a list of arguments separated by commas without commas

\newcommand*{\args}[1]{%
  \let\@argsep\@argsepinit
  \@for\@arg:=#1\do{%
    \@argsep\@arg}%
}

\def\@argsepinit{\let\@argsep\argsep}

\newcommand{\argsep}{}

\newcommand{\atom}[2]{\mathord{#1}#2}

%    ****************************************
%    *       SYMBOLS AND SCRIPTY BITS       *
%    ****************************************
% equivalent to commenting something out, but usable on multiple lines
\providecommand{\nix}[1]{}

\newcommand*{\script}[1]{\ensuremath{\mathcal{#1}}}

\providecommand{\meta}[1]{\ensuremath{#1}} % TB: used for all metavariables
\renewcommand*{\meta}[1]{\ensuremath{#1}} % TB: used for all metavariables
\newcommand{\metaX}{\ensuremath{X}\xspace}
\newcommand{\metaY}{\ensuremath{Y}\xspace}
\newcommand{\metaZ}{\ensuremath{Z}\xspace}
\newcommand{\metav}{\ensuremath{v}\xspace}
\newcommand{\metaPredicate}{\ensuremath{P}\xspace}
\newcommand{\metaterm}{\ensuremath{t}\xspace}

% create a blank
\newcommand*{\blank}{\underline{\hspace*{2.5em}}}
\newcommand*{\gap}[1]{\blank$_{#1}$} % TB: used for keys, to avoid use/mention confusion

% These are included for discussing formal semantics in predicate logic.
\newcommand*{\model}{{\mathcal{M}}}
%\newcommand*{\extension}[1]{\ensuremath{\mbox{extension}(#1)}}
\newcommand*{\denote}[1]{\llbracket #1\rrbracket}
\newcommand*{\referent}[1]{\ensuremath{\mbox{referent}(#1)}}
  % I personally dislike the default LaTeX angle brackets. I think that
  % they are too narrow. If you want to use them, though, you can
  % replace < and > in the commands below with \langle and \rangle
\newcommand*{\openntuple}{\langle}
\newcommand*{\closentuple}{\rangle}
 \newcommand{\varvariant}[3]{#1[#2 \!:\! #3]} % variant of a variable assignment



\newcommand\SetSymbol[1][]{\nonscript\:#1\vert\nonscript\:
	\mathopen{}\allowbreak}
\providecommand{\given}{\SetSymbol}
\DeclarePairedDelimiterX\Set[1]\{\}{%
	\renewcommand\given{\SetSymbol[\delimsize]}
	#1
}

\newcommand{\domain}{\mathsf{Dom}}
	
\newcommand*{\ntuple}[1]{\ensuremath{\mathopen{\openntuple}}#1\ensuremath{\mathclose{\closentuple}}}

\newcommand{\NumberConnective}[3][black]{\stackrel{\textcolor{#1}{\hbox{#3}}}{\hbox{$#2$}}} %CCM added for the additional section.

\DeclarePairedDelimiter\sequence{\langle}{\rangle}



% definitions
\newcommand*{\define}[1]{\textsc{\lowercase{\color{leadbeater}#1}}}


%    ****************************************
%    *          QUINE QUOTES          *
%    ****************************************

%%Godel Coding definitions
%	\newbox\QuineQuoteBoxA
%		\newdimen\QuineQuoteCornerHgt
%		\setbox\QuineQuoteBoxA=\hbox{$\ulcorner$}
%		\global\QuineQuoteCornerHgt=\ht\QuineQuoteBoxA
%		\newdimen\QuineQuoteArgHgt
%	\newcommand{\QuineQuoteraised}[1]{
%				\setbox\gnBoxA=\hbox{$#1$}%
%			\QuineQuoteArgHgt=\ht\QuineQuoteBoxA%
%			\ifnum \QuineQuoteArgHgt<\QuineQuoteCornerHgt
%			\QuineQuoteArgHgt=0pt%
%			\else
%			\advance \QuineQuoteArgHgt by -\QuineQuoteCornerHgt%
%			\fi
%			\raise\QuineQuoteArgHgt\hbox{$\ulcorner$} \box\QuineQuoteBoxA %
%			\raise\QuineQuoteArgHgt\hbox{$\urcorner$}}
%
%
%	\newcommand{\QuineQuote}[1]{\ensuremath{\ulcorner} #1 \ensuremath{\urcorner}}}
%
%\RequirePackage{suffix}
%\WithSuffix\newcommand\QuineQuote*{\ensuremath{\gnraised}}

\newcommand{\QuineQuote}[1]{\text{`}#1\text{'}}


%    ****************************************
%    *          FORMATION TREES          *
%    ****************************************

\RequirePackage{forest}

% --- to centre node around a main (binary) connective ---
\makeatletter
\newlength{\mc@L}
\newlength{\mc@R}
\newcommand{\centrearoundmainconnective}[3]{%
	\begingroup
	\settowidth{\mc@L}{$#1$}%
	\settowidth{\mc@R}{$#3$}%
	\ifdim\mc@L>\mc@R
	#1#2#3\hphantom{\makebox[\dimexpr\mc@L-\mc@R\relax]{$#3$}}%
	\else
	\hphantom{\makebox[\dimexpr\mc@R-\mc@L\relax]{$#1$}}#1#2#3%
	\fi
	\endgroup
}
\makeatother



%\RequirePackage{tikzmark}



%    ****************************************
%    *          LIST  ENVIRONMENTS          *
%    ****************************************
% The {earg} environment is used for arguments and example sentences.
% The {ekey} environment is used for symbolization keys.
\newcounter{eargnum}
\newcounter{OLDeargnum}
\newenvironment{earg}%
{\begin{list}{\arabic{eargnum}.}{\usecounter{eargnum}\itemsep=0pt \parsep=0pt}}%
{\setcounter{OLDeargnum}{\arabic{eargnum}}\end{list}}

\newenvironment{ebullet}% TB: added to give a nice bulleted enivronment
{\begin{list}{\textbullet}{\itemsep=0pt \parsep=0pt}}%
{\end{list}}
\newcommand{\ekeylabel}[1]{{\makebox[8ex][r]{{\ensuremath{ #1}:}}}}
\newenvironment{ekey}{\begin{list}{}{\renewcommand{\makelabel}{\ekeylabel} \itemsep=0pt \parsep=0pt}}{\end{list}}
\newenvironment{interp}{\begin{list}{}{\renewcommand{\makelabel}{\ekeylabel} \itemsep=0pt \parsep=0pt}}{\end{list}}
% enumerate -- used for numbered examples; counter resets every
% chapter


%    ****************************************
%    *             TRUTH TABLES             *
%    ****************************************

% This facilitates the typesetting of truth tables by
% effectively eliminating the intercolumn space.
% This allows truth tables with the Ts and Fs immediately
% below arbitrary connectives.
% An example follows:
%\begin{center}
%\begin{tabular}{c|c|@{\TTon}*{5}{c}@{\TToff}}
%$A$&$B$&$(A$&\eand&$B)$&\eif&A\\
%\hline
% T & T &    &  T  &    &  T & \\
% T & F &    &  F  &    &  T & \\
% F & T &    &  F  &    &  T & \\
% F & F &    &  T  &    &  T &
%\end{tabular}
%\end{center}
%\newcommand*{\TTon}{\hspace{1.5em}\extracolsep{-1em}}
%\newcommand*{\TToff}{\extracolsep{-1em}\hspace{.3em}}

\RequirePackage{multicol,array,multirow}

% Moving to Memoir breaks Magnus's elegant macro
% In the preceding column definition, I would offer instead:
%\begin{tabular}{c c | d e e e f}
% d for left-most columns, e for middle ones, f for right-most ones. The ensuing spacing is ok.
\newcolumntype{d}{ c@{\extracolsep{0.1em}}}
\newcolumntype{e}{@{\extracolsep{0.1em}}c@{\extracolsep{0.1em}}}
\newcolumntype{f}{@{\extracolsep{0.1em}}c }
\newcommand*{\TTbf}[1]{\textbf{#1}}

%    ****************************************
%    *                PROOFS                *
%    ****************************************

\usepackage[arrayenv=tabular]{fitch}


% a command for indicating the goal in a proof or subproof
\newcommand*{\want}[1]{\by{want \ensuremath{#1}}{}}


% For backwards compatability for Catrin's rewrites
\newenvironment{pf}{\fitchproof}{\endfitchproof}

\newenvironment{squishedpf}
	{\noindent\par\noindent$\begin{nd}}
	{\end{nd}$\noindent}

% I keep mixing up the \ce and \ae commands, so I define a less ambiguous
% alternate set of commands

\newcommand*{\ce}{\ae}
\newcommand*{\ci}{\ai}

\newcommand*{\notI}{\ni}
\newcommand*{\notE}{\by{{\enot}E}}
\newcommand*{\pbc}{\notE}
\newcommand*{\iffI}{\bi}
\newcommand*{\iffE}{\be}
\newcommand*{\ifI}{\ci}
\newcommand*{\ifE}{\ce}
\newcommand*{\andI}{\ai}
\newcommand*{\andE}{\ae}
\newcommand*{\orI}{\oi}
\newcommand*{\orE}{\oe}
\newcommand*{\redI}{\ri}
\newcommand*{\redE}{\re}
\newcommand*{\botI}{\ri}
\newcommand*{\botE}{\re}
\newcommand*{\forallI}{\Ai}
\newcommand*{\forallE}{\Ae}
\newcommand*{\existsI}{\Ei}
\newcommand*{\existsE}{\Ee}
\newcommand*{\LEM}{\by{LEM}{}}
%\newcommand*{\ProofbyContradiction}{\by{Contradiction}}
\newcommand*{\Reiteration}{\by{R}}


% added by Tim Button
\def\tnd{\by{TND}}% TB: tertium non datur
\def\dne{\by{DNE}}% TB: double negation elimination (derived rule)
\def\mt{\by{MT}}% TB: modus tollens (derived rule)
\def\ds{\by{DS}}% TB: disjunctive syllogism (a derived rule in Cambridge version)
\def\dem{\by{DeM}}% TB: De Morgan rule (derived rule)
\def\cq{\by{CQ}}% TB: conversion of quantifiers (derived rule)


%Modal logic
  \def\boxI{\by{{\ebox}I}}%
  \def\boxE{\by{{\ebox}E}}%
  \def\mc{\by{MC}}%
  \def\diadf{\by{Def{\ediamond}}}%
  \def\rt{\by{R$\mathbf{T}$}}%
  \def\rfour{\by{R$\mathbf{4}$}}%
  \def\rfive{\by{R$\mathbf{5}$}}%

\newcommand*{\ellipsesline}{\have[\ ]{dots}{\;\raise-.65ex\hbox{\vdots}}}
\newcommand*{\hypoellipsesline}{\hypo[\ ]{dots}{\;\raise-.65ex\hbox{\vdots}}}
% for elipses in statements of rules. E.g.:
%\begin{pf}
%\open
%	\hypo{fitchproof}a}{\metaX}
%	\ellipsesline
%	\have[n]{nb}{\ered}
%\close
%\have[\ ]{na}{\enot\metaX}\ni{a-nb}
%\end{pf}



%    ****************************************
%    *            DIAGRAMS IN TIKZ           *
%    ****************************************
% TB: I use diagrams in a few places, always using Tikz.
%   A. To illustrate an argument for the truth table of the material conditional
%   B. To draw graphs illustrating small finite interpretations.
% All these drawings are done using tikz
\usepackage{tikz}
\usetikzlibrary{positioning,shapes,arrows,automata,positioning,shapes,shapes.misc,automata,decorations,decorations.pathreplacing,decorations.pathmorphing,shapes.misc,shadows,tikzmark,arrows.meta}

\tikzset{phantom_shape/.style={thick, fill=black!0, minimum width=30pt, minimum height=30pt}, % TB: renders the shape invisible
grey_shape/.style={thick, fill=black!20, draw, minimum width=30pt, minimum height=30pt}, % TB: renders a light grey shape with a black outline
white_shape/.style={thick, fill=black!0, draw, minimum width=30pt, minimum height=30pt} % TB: renders a white shape with a black outline
}

\RequirePackage{tikzpeople} % CCM for disjunctive reasoning eg

\tikzset{every label/.style={align=center}, every node/.style={align=center}}

	\tikzset{
invisible/.style={opacity=0,text opacity=0},
visible on/.style={alt=#1{}{invisible}},
alt/.code args={<#1>#2#3}{%
 \alt<#1>{\pgfkeysalso{#2}}{\pgfkeysalso{#3}} % \pgfkeysalso doesn't change the path
},
	}
	\forestset{
visible on/.style={
for tree={
 /tikz/visible on={#1},
 edge={/tikz/visible on={#1}}}}}

\tikzset{propn/.style={draw,shape=ellipse,align=center}}
\tikzset{arg/.style={->,shorten >=0.2cm,shorten <=.2cm}}
\tikzset{joiningargin/.style={shorten <=0.2cm}}
\tikzset{joiningargout/.style={->,shorten >=0.2cm}}


%    ****************************************
%    *            RANDOM EXTRA STUFF           *
%    ****************************************

%
%%RZ: Make sure we have a copyright symbol
%
%\def\copyright{\textcircled{C}}

\definecolor{darkred}{rgb}{0.5,0,0} % TB: used to color links in red




% define "struts", as suggested by Claudio Beccari in
%    a piece in TeX and TUG News, Vol. 2, 1993.
\newcommand\Tstrut{\rule{0ex}{2.6ex}}         % = `top' strut
\newcommand\Bstrut{\rule[-0.9ex]{0ex}{0ex}}   % = `bottom' strut



\usepackage{pifont}% http://ctan.org/pkg/pifont
\newcommand{\tick}{\ding{51}}%
\newcommand{\cross}{\ding{55}}%



\newcommand{\prem}{\item}
\newcommand{\conc}{\item[\therefore] Therefore: }


\newcommand{\mainconnective}[1]{\,\mainconnectivecolor{#1}\,}
\newcommand{\mainconnectivecolor}[1]{\textcolor{leadbeater}{#1}}


\def\pr{\ensuremath{p}}

\endinput

\IfFileExists{forallxbris-local.sty}{\usepackage{forallxbris-local}}{}
